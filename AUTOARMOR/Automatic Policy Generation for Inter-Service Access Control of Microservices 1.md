#容器安全 #CCF-A #2021年 #USENIX 

# 问题

在当前微服务的大背景下，出现了新型的安全问题。一个微服务可能会被另一个（被攻击的）微服务所滥用。对于这个问题，服务间的访问控制可以很好的解决。但是对于大型的服务系统来讲，对每个微服务定制细粒度的访问控制几乎不能通过人手工进行。

# 背景

- K8s和Istion都提供了服务间的访问控制机制
- 前人有工作集中于安全策略自动生成：

## 基于文档的方法

利用NLP的方法从应用文档中推断安全策略
缺点：准确性低、可用性差

## 基于历史的方法

从历史的操作中学习安全策略
缺点：需要完整的历史数据

## 基于模型的方法

根据服务的行为产生正确的安全策略
缺点：灵活性差、可拓展性差

# 问题难点
1. 如何获取完整的、细粒度的调用逻辑
2. 如何产生和更新访问控制策略

# 本文工作

## 实现了一个基于 请求提取 机制的静态分析方法

从源代码中提取微服务中的每次可能的调用

## 实现了一个基于图的策略管理机制

根据permission图的对访问控制策略进行产生、更新、删除。

# 评估

选取了5款开源的微服务应用


## 能否提取出请求

## 提取请求所需时间
平均只需要57秒，完全在可接受的时间范围内

## 提取出的请求能保证安全性吗

验证安全性的方法，模拟了三种不同类型的攻击。

还进行了更多讨论，包括通配符导致的权限过大。


# 缺点

1. 提取并不充分（静态分析的弊端）
2. 如果没有源代码呢
3. 如果微服务的代码是不可信的呢
4. 提取不充分
5. 访问控制的粒度
6. 通配符导致的攻击
